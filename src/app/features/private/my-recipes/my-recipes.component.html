<app-navbar />
<div class="min-h-screen bg-gradient-to-b from-background to-celadon py-8">
  <div class="max-w-6xl mx-auto px-6 sm:px-8">
    <div class="flex justify-between items-center mb-6">
      <div>
        <h1 class="mb-2 text-4xl">Mis Recetas</h1>
        <p class="text-slate-gray text-lg">Gestiona todas tus recetas creadas</p>
      </div>
      <a routerLink="/recipes/new" class="btn-primary inline-flex items-center gap-2 text-base px-6 py-3">
        <lucide-icon [img]="PlusIcon" class="w-5 h-5"></lucide-icon>
        Nueva Receta
      </a>
    </div>

    <!-- Filtros -->
    <app-recipe-filters
      [allergens]="allergens"
      [showVisibilityFilter]="true"
      [searchPlaceholder]="'Buscar en mis recetas...'"
      (filtersChange)="onFiltersChange($event)"
    />

    @if (isLoading) {
      <div class="text-center py-16">
        <div class="inline-block animate-spin rounded-full h-12 w-12 border-b-4 border-cambridge-blue mb-3"></div>
        <p class="text-slate-gray text-base">Cargando tus recetas...</p>
      </div>
    } 
    
    @if (!isLoading && filteredRecipes.length > 0) {
      <div class="mb-5 text-slate-gray text-base">
        Mostrando {{ filteredRecipes.length }} de {{ myRecipes.length }} recetas
      </div>
      
      <div class="grid md:grid-cols-3 gap-6">
        @for (recipe of filteredRecipes; track recipe.id) {
          <app-recipe-card
            [recipe]="recipe"
            [showVisibilityBadge]="true"
            [showActionButtons]="true"
            [showEditDelete]="true"
            (onEdit)="editRecipe($event)"
            (onDelete)="deleteRecipe($event)"
          />
        }
      </div>
    } 
    
    @if (!isLoading && filteredRecipes.length === 0 && myRecipes.length === 0) {
      <div class="bg-white rounded-2xl shadow-lg text-center py-16 px-6">
        <lucide-icon [img]="ChefHatIcon" class="w-20 h-20 text-slate-gray mx-auto mb-4 opacity-30"></lucide-icon>
        <h3 class="mb-3 text-xl">Aún no tienes recetas</h3>
        <p class="text-slate-gray mb-6 text-base">Empieza a crear tus propias recetas y guárdalas aquí</p>
        <a routerLink="/recipes/new" class="btn-primary inline-flex items-center gap-2 text-sm">
          <lucide-icon [img]="PlusIcon" class="w-4 h-4"></lucide-icon>
          Crear Mi Primera Receta
        </a>
      </div>
    } 
    
    @if (!isLoading && filteredRecipes.length === 0 && myRecipes.length > 0) {
      <div class="bg-white rounded-2xl shadow-lg text-center py-16 px-6">
        <lucide-icon [img]="SearchIcon" class="w-20 h-20 text-slate-gray mx-auto mb-4 opacity-30"></lucide-icon>
        <h3 class="mb-3 text-xl">No se encontraron recetas</h3>
        <p class="text-slate-gray mb-6 text-base">Intenta con otros filtros o términos de búsqueda</p>
      </div>
    }
  </div>
</div>
<app-footer />

@if (recipeToDelete) {
  <div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
    <div class="bg-white rounded-2xl p-6 max-w-md w-full shadow-xl">
      <h3 class="mb-3 text-xl">¿Eliminar receta?</h3>
      <p class="text-slate-gray mb-6 text-base">
        ¿Estás seguro de que quieres eliminar "<strong>{{ recipeToDelete.title }}</strong>"? Esta acción no se puede deshacer.
      </p>
      <div class="flex gap-3">
        <button (click)="recipeToDelete = null" class="flex-1 btn-secondary text-sm">Cancelar</button>
        <button (click)="confirmDelete()" class="flex-1 bg-error hover:bg-red-700 text-white px-4 py-2 rounded-lg font-semibold transition-all text-sm">
          Eliminar
        </button>
      </div>
    </div>
  </div>
}
